SRCS=		echo.c echotest.c fifo.c

OBJS=		$(SRCS:.c=.o)
HDRS=		
PROG=		echotest

SPANDSP=	spandsp

CFLAGS=		@CFLAGS@ -O0 -g -Wall -I $(SPANDSP)
LDFLAGS=	@LDFLAGS@ $(EFENCE)
DEFS=		@DEFS@
LIBS=		@LIBS@

PORTAUDIO_CFLAGS= `pkg-config --cflags portaudio-2.0`
PORTAUDIO_LIBS=	`pkg-config --libs portaudio-2.0`
#PORTAUDIO_CFLAGS= @PORTAUDIO_CFLAGS@ 
#PORTAUDIO_LIBS=	@PORTAUDIO_LIBS@

SNDFILE_CFLAGS=	`pkg-config --cflags sndfile`
SNDFILE_LIBS=	`pkg-config --libs sndfile`
#SNDFILE_CFLAGS=	@SNDFILE_CFLAGS@
#SNDFILE_LIBS=	@SNDFILE_LIBS@

SRC_CFLAGS=	`pkg-config --cflags samplerate`
SRC_LIBS= 	`pkg-config --libs samplerate`
#SRC_CFLAGS=	@SRC_CFLAGS@
#SRC_LIBS= 	@SRC_LIBS@

CODEC2_CFLAGS= -I/usr/local/include
CODEC2_LIBS= -L/usr/local/lib -lcodec2

CFLAGS+=	$(PORTAUDIO_CFLAGS) $(SNDFILE_CFLAGS) $(SRC_CFLAGS) $(CODEC2_CFLAGS)
LDFLAGS+=	$(PORTAUDIO_LIBS) $(SNDFILE_LIBS) $(SRC_LIBS) $(CODEC2_LIBS)

all:		$(PROG)

%.o: %.c $(HDRS)
	$(CC) $(CFLAGS) $(DEFS) -c -o $@ $<

$(PROG):	$(OBJS)
	$(CC) $(CFLAGS) -o $@ $(OBJS) $(LDFLAGS) $(LIBS)

clean:
	$(RM) -f $(OBJS) $(PROG)