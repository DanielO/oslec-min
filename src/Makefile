SRCS=		echo.c echotest.c fifo.c

OBJS=		$(SRCS:.c=.o)
HDRS=		
PROG=		echotest

SPANDSP=	spandsp

CFLAGS=		-g -O2 -O0 -g -Wall -I $(SPANDSP)
CPPFLAGS=	
LDFLAGS=	 $(EFENCE)
DEFS=		-DPACKAGE_NAME=\"echotest\" -DPACKAGE_TARNAME=\"echotest\" -DPACKAGE_VERSION=\"0.1\" -DPACKAGE_STRING=\"echotest\ 0.1\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_CODEC2_H=1 -DHAVE_LIBCODEC2=1 -DHAVE_PTHREAD_PRIO_INHERIT=1 -DHAVE_PTHREAD=1 -DHAVE_MATH_H=1 -DHAVE_FLOAT_H=1 -DHAVE_LIBM=1 -DHAVE_SINF=1 -DHAVE_COSF=1 -DHAVE_TANF=1 -DHAVE_ASINF=1 -DHAVE_ACOSF=1 -DHAVE_ATANF=1 -DHAVE_ATAN2F=1 -DHAVE_CEILF=1 -DHAVE_FLOORF=1 -DHAVE_POWF=1 -DHAVE_EXPF=1 -DHAVE_LOGF=1 -DHAVE_LOG10F=1
LIBS=		-lm -lcodec2 

PORTAUDIO_CFLAGS= -I/opt/local/include  
PORTAUDIO_LIBS=	-framework CoreAudio -framework AudioToolbox -framework AudioUnit -framework Carbon -L/opt/local/lib -lportaudio  

SRC_CFLAGS=	-I/opt/local/include  
SRC_LIBS= 	-L/opt/local/lib -lsamplerate  

PTHREAD_CFLAGS=	-D_THREAD_SAFE -pthread
PTHREAD_LIBS=	

CFLAGS+=	$(PTHREAD_CFLAGS) $(PORTAUDIO_CFLAGS) $(SRC_CFLAGS)
LIBS+=		$(PTHREAD_LIBS) $(PORTAUDIO_LIBS) $(SRC_LIBS)

all:		$(PROG)

%.o: %.c $(HDRS)
	$(CC) $(CPPFLAGS) $(CFLAGS) $(DEFS) -c -o $@ $<

$(PROG):	$(OBJS)
	$(CC) -o $@ $(OBJS) $(LIBS)

clean:
	$(RM) -f $(OBJS) $(PROG)
